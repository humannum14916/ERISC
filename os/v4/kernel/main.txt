
meta header kernel;

#link kernel/log.txt
#link kernel/math.txt
#link kernel/initDiskDriver.txt
#link kernel/memory.txt

define int kernelLength = null;

define array[char] buffer = 256;

function stackless void MAIN(){
  //get the kernel length
  call InitDriver.loadBlock(0,buffer);
  kernelLength = Math.mult(
    {int}(buffer[2]) - 1, 256
  );

  //initialize the memory allocator
  call Memory.init(kernelLength,0xff00);

  //idle
  while(true){};
};
